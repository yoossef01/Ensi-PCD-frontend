<div class="split-container">
  <div class="split-left">

<section>
    <h2> Ajouter un produit</h2>
  
     <form #produitForm="ngForm" (submit)="addProduit()">
      <div mat-dialog-content>
        <mat-form-field>
        <mat-label for="nom">Nom</mat-label>
        <input type="text" id="nom" name="nom" placeholder="Nom" matInput  [(ngModel)]="p.nom" [required]="true">
        <mat-error *ngIf="isNomEmpty">Le nom est obligatoire</mat-error>
      </mat-form-field>
      
  
      <mat-form-field>

        <mat-label for="prix">Prix</mat-label>
        <input type="number" id="prix" name="prix" placeholder="Prix" matInput [(ngModel)]="p.prix" [required]="true">
      </mat-form-field>
  
      <mat-form-field>

        <mat-label for="quantite">Quantité</mat-label>
        <input type="number" id="quantite" name="quantite" placeholder="Quantité" matInput [(ngModel)]="p.quantite" [required]="true">
      </mat-form-field>
  
      
  
      <mat-form-field>
        <mat-label for="categorie">Catégorie</mat-label>
        <mat-select id="categorie" name="categorie"(change)="selectCat($event)" [(ngModel)]="p.categorie.id" [required]="true" >
          <mat-option *ngFor="let cat of categories" [value]="cat.id" >{{ cat.nom }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-label for="magasin">Magasin</mat-label>
        <mat-select id="magasin" name="magasin"(change)="selectMag($event)" [(ngModel)]="p.magasin.id" [required]="true" >
          <mat-option *ngFor="let mag of magasins" [value]="mag.id" >{{ mag.nom }}</mat-option>
        </mat-select>
      </mat-form-field>
  <div>
        <mat-label for="photo">Photo</mat-label>
        <input #myInput  type="file" id="photo" name="photo" (change)="onPhotoSelected($event)" [(ngModel)]="photo" required>
      </div>
      <button mat-raised-button color="primary" type="submit"href="/liste" (click)="onCancel()"  >Ajouter</button>
      <button mat-raised-button mat-dialog-close (click)="onCancel()">Annuler</button>
    </div>
    </form> 

  </section></div>
  <div class="split-right">
  </div>
  <div>
    <div class="card" style="width: 18rem;">
        <img class="card-img-top"  *ngIf="img" [src]="img" alt="Photo du produit" width="50" height= "170" alt="Card image cap">
        <div class="card-body">
          <h5 class="card-title">{{p.nom}}</h5>
          <h6 style="color:red">

            {{p.prix}} DT
          </h6>
          <h6 style="color: green" *ngIf="p.quantite>0; else repture">
            En Stock
          </h6>
          <p><button class="btn btn-danger m-2" >
            <span class="fa fa-trash"></span>
          </button>
         
            <a  class ="btn btn-primary m-2">
            <span class="fa fa-info"></span>
          </a>
          <button class="btn btn-primary m-2">
            <span class="fa-solid fa-pen"></span>
          </button>
        </p>
        <ng-template #repture><h6 style="color: brown"> Rupture de Stock</h6>
        </ng-template>
        </div>
      </div> 
</div>
